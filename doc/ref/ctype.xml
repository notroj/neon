<refentry id="refgetctype">

  <refmeta>
    <refentrytitle>ne_get_content_type</refentrytitle>
    <manvolnum>3</manvolnum>
  </refmeta>

  <refnamediv>
    <refname id="ne_get_content_type">ne_get_content_type</refname>
    <refpurpose>retrieve content type of response</refpurpose>
  </refnamediv>

  <refsynopsisdiv>
    <funcsynopsis>
      <funcsynopsisinfo>#include &lt;ne_basic.h&gt;

typedef struct {
    const char *type, *subtype;
    const char *charset;
    char *value;
} <type>ne_content_type;</type></funcsynopsisinfo>

      <funcprototype>
        <funcdef>int <function>ne_get_content_type</function></funcdef>
        <paramdef>ne_request *<parameter>req</parameter></paramdef>
        <paramdef>ne_content_type *<parameter>ctype</parameter></paramdef>
      </funcprototype>
    </funcsynopsis>
  </refsynopsisdiv>

  <refsect1>
    <title>Description</title>

    <para>The <function>ne_get_content_type</function> function retrieves
    and parses the <literal>Content-Type</literal> header from the response
    to request <parameter>req</parameter>.  If successful, all fields of
    the <parameter>ctype</parameter> structure are set (and are never
    &null;).  The <structfield>value</structfield> field must be freed by
    the caller using <function>free</function> after use.</para>

  </refsect1>

  <refsect1>
    <title>Return value</title>

    <para><function>ne_get_content_type</function> returns zero if the
    response had a valid <literal>Content-Type</literal> header, or
    non-zero on error.  On error, the <parameter>ctype</parameter>
    structure is not altered.</para>

  </refsect1>

  <refsect1>
    <title>History</title>

    <para>A default <structfield>charset</structfield> value was
    returned for <literal>text/xml</literal> content-types in &neon;
    0.36.0 and earlier; later versions use no default (per <ulink
    url="https://www.rfc-editor.org/rfc/rfc7303">RFC
    7303</ulink>).</para>
  </refsect1>

  <refsect1>
    <title>See also</title>

    <para><xref linkend="ne_xml_dispatch_request"/>, <xref linkend="ne_request_dispatch"/></para>
  </refsect1>

</refentry>
